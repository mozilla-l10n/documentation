<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Pretranslation - Localization at Mozilla - Internal Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Localization at Mozilla - Internal Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/mozilla-l10n/documentation/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/mozilla-l10n/documentation/edit/main/src/tools/pontoon/managing_pretranslation.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="managing-pretranslation"><a class="header" href="#managing-pretranslation">Managing Pretranslation</a></h1>
<h2 id="opt-in-guidelines-to-enable-new-locales"><a class="header" href="#opt-in-guidelines-to-enable-new-locales">Opt-in guidelines to enable new locales</a></h2>
<p>It’s important to note that <strong>these are not strict criteria</strong>: members of staff will evaluate each request to opt in individually, based on their knowledge of the project and direct experience with the locale.</p>
<p><strong>Criteria for enabling pretranslation for a new locale</strong></p>
<ul>
<li>Request needs to come from translators or managers active within the last month (translating or reviewing).</li>
<li>There is an active manager for the locale (last activity within 2 months).</li>
</ul>
<p><strong>Criteria for enabling pretranslation for a new project</strong></p>
<ul>
<li>Less than 400 missing strings, except for projects or locales where existing pretranslation statistics provide high-confidence.</li>
<li>Average review time for pretranslations in existing projects is faster than 3 weeks.</li>
</ul>
<p><strong>Criteria for disabling the feature for a locale or a project</strong></p>
<ul>
<li>Approval rate drops below 40%.</li>
<li>Average review time for pretranslations is slower than 6 weeks.</li>
</ul>
<p>Note that disabling a project would always involve a conversation with reviewers for the locale.</p>
<h2 id="enabling-pretranslation-in-a-project"><a class="header" href="#enabling-pretranslation-in-a-project">Enabling pretranslation in a project</a></h2>
<p>Access Pontoon’s <a href="https://pontoon.mozilla.org/admin/">admin console</a>, and select the project: at the bottom of the page there is a section dedicated to <em>Pretranslation</em>.</p>
<p><strong>IMPORTANT</strong>: if this is the first project for a locale, the first step is to <a href="#train-and-set-up-a-custom-machine-translation-model">train and set up the custom machine translation model</a> in Google AutoML Translation.</p>
<p>Use the checkbox <code>PRETRANSLATION ENABLED</code> to enable the feature for the project, then move the requested locales from the <code>Available</code> list to <code>Chosen</code>. Clicking the <code>PRETRANSLATE</code> button will pretranslate immediately all missing strings in enabled locales, otherwise pretranslation will run automatically as soon as new strings are added to the project.</p>
<h2 id="train-and-set-up-a-custom-machine-translation-model"><a class="header" href="#train-and-set-up-a-custom-machine-translation-model">Train and set up a custom machine translation model</a></h2>
<p>To improve performance of the machine translation engine powering the pretranslation feature, custom machine translation models are trained for each locale using Pontoon’s translation memory. That results in better translation quality than what’s provided by the generic machine translation engine.</p>
<p>To create a custom translation model, first go to the <a href="https://mozilla-l10n.github.io/localizer-documentation/tools/pontoon/teams_projects.html#team-page">team page</a> of the locale you are creating a custom translation model for and download its <a href="https://mozilla-l10n.github.io/localizer-documentation/tools/pontoon/translate.html#downloading-and-uploading-translations">translation memory file</a>. Next, go to the <a href="https://console.cloud.google.com/translation/datasets?project=moz-fx-pontoon-prod">Google Cloud console</a> (requires permission) and follow these instructions — in case of doubt, consult the <a href="https://cloud.google.com/translate/automl/docs/create-machine-translation-model">official instructions</a>.</p>
<p>The first step is to create a translation dataset. In the <code>Datasets</code> panel, select <code>CREATE DATASET</code>:</p>
<ul>
<li>For the <code>Dataset name</code>, follow the pattern used by existing datasets: <code>dataset_LOCALE_YYYY_MM_DD</code> (e.g. <code>dataset_pt_BR_2023_09_20</code>, note that <code>-</code> is not allowed).</li>
<li>Select the <code>Translate from…</code> language (<code>English (EN)</code>) and the <code>Translate to…</code> language (e.g. <code>Portuguese (PT)</code> for <code>pt-BR</code>).</li>
<li>Click <code>CREATE</code>.</li>
</ul>
<p>This operation will take a few seconds. At the end, an empty dataset with the selected name will be available in the list, with <code>0</code> in the <code>Total pairs</code> column. It’s now time to import Pontoon’s translation memory and train the model:</p>
<ul>
<li>Click the dataset, then navigate to the <code>IMPORT</code> tab.</li>
<li>Use <code>SELECT FILES</code> to select the downloaded TMX file from your device.</li>
<li>Click <code>BROWSE</code> in the <code>Destination on Cloud Storage</code> field and select <code>pontoon-prod-model-data-c1107144</code>.</li>
<li>Click <code>CONTINUE</code> to start the import process. The import process will take a few minutes (it’s possible to close this window and return later to the list of datasets, when completed the <code>Status</code> column will say <code>Success: ImportData</code>).</li>
<li>Once the import is completed, navigate to the <code>TRAIN</code> tab and click <code>START TRAINING</code>.</li>
</ul>
<p>Note that creating the model is a background job which takes a few hours (when completed the <code>Status</code> column will say <code>Success: CreateModel</code>), and models for at most 4 locales can be trained concurrently. When the model is created, store its name (usually starting with <code>NM</code>, followed by a series of alphanumeric characters) under <em>Google automl model</em> in the <a href="https://pontoon.mozilla.org/a/">Django’s admin interface</a> of the locale.</p>
<p>From that point on, Machinery will start using the custom machine translation model instead of the generic one and you’ll be set to enable pretranslation for the locale.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../tools/pontoon/adding_new_locale.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../tools/pontoon/messaging_center.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../tools/pontoon/adding_new_locale.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../tools/pontoon/messaging_center.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
